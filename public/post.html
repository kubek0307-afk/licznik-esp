<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<title>Post</title>
<style>
body{background:#111;color:#eee;font-family:Arial}
img{max-width:100%;border-radius:8px}
</style>
</head>
<body>

<a href="/">⬅ Powrót</a>
<div id="post"></div>

<script>
const id=new URLSearchParams(location.search).get("id");
const accessCode=localStorage.getItem("accessCode");

fetch("/api/data",{ headers:{ "access-code":accessCode }})
.then(r=>r.json())
.then(d=>{
  const p=d.history.find(x=>x._id===id);
  if(!p) return;
  post.innerHTML=`
    <span class="tag ${p.type}">${p.type}</span>
    <h2>${p.title || ""}</h2>
    <p>${p.text || ""}</p>
    <p>${p.date}</p>
    ${p.image ? `<img src="${p.image}">` : ""}
  `;
});
</script>

</body>
</html>
